(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[565],{9431:function(e,s,a){(window.__NEXT_P=window.__NEXT_P||[]).push(["/profile/[userId]",function(){return a(2069)}])},2049:function(e,s,a){"use strict";var t=a(5893);a(7294);let d=()=>(0,t.jsx)("div",{className:"fixed top-0 left-0 w-screen h-screen z-20",children:(0,t.jsxs)("div",{className:"flex md:flex-row flex-xol flex-wrap justify-center items-center bg-white h-screen sm:px-6 lg:px-8",children:[(0,t.jsxs)("div",{className:"w-full sm:w-80 bg-white rounded-md shadow-xl m-3",children:[(0,t.jsx)("div",{className:"h-44 bg-gray-300 rounded-t-md animate-pulse"}),(0,t.jsxs)("div",{className:"p-5",children:[(0,t.jsx)("div",{className:"h-6 rounded-sm bg-gray-200 duration-75 animate-pulse mb-4"}),(0,t.jsxs)("div",{className:"animate-pulse",children:[(0,t.jsx)("div",{className:"h-1 mt-2 w-1/2 rounded-sm bg-gray-300"}),(0,t.jsx)("div",{className:"h-1 mt-2 w-1/3 rounded-sm bg-gray-300"}),(0,t.jsx)("div",{className:"h-1 mt-2 w-2/3 rounded-sm bg-gray-300"}),(0,t.jsx)("div",{className:"h-1 mt-2 rounded-sm bg-gray-300"}),(0,t.jsx)("div",{className:"h-1 mt-2 rounded-sm bg-gray-300"}),(0,t.jsx)("div",{className:"h-1 mt-2 rounded-sm bg-gray-300"}),(0,t.jsx)("div",{className:"h-2 rounded-sm bg-gray-300"})]})]})]}),(0,t.jsxs)("div",{className:"",children:[(0,t.jsxs)("div",{className:"flex w-screen md:w-full sm:w-96 bg-white rounded-md shadow-xl",children:[(0,t.jsx)("div",{className:"w-1/3 bg-gray-300 rounded-l-md animate-pulse"}),(0,t.jsxs)("div",{className:"p-5 w-3/4",children:[(0,t.jsx)("div",{className:"h-6 rounded-sm bg-gray-200 duration-75 animate-pulse mb-4"}),(0,t.jsxs)("div",{className:"animate-pulse",children:[(0,t.jsx)("div",{className:"h-1 mt-2 w-1/3 rounded-sm bg-gray-300"}),(0,t.jsx)("div",{className:"h-1 mt-2 w-2/3 rounded-sm bg-gray-300"}),(0,t.jsx)("div",{className:"h-1 mt-2 rounded-sm bg-gray-300"}),(0,t.jsx)("div",{className:"h-1 mt-2 rounded-sm bg-gray-300"}),(0,t.jsx)("div",{className:"h-1 mt-2 rounded-sm bg-gray-300"}),(0,t.jsx)("div",{className:"h-2 rounded-sm bg-gray-300"})]})]})]}),(0,t.jsxs)("div",{className:"flex w-screen md:w-full sm:w-96 bg-white rounded-md shadow-xl",children:[(0,t.jsx)("div",{className:"w-1/3 bg-gray-300 rounded-l-md animate-pulse"}),(0,t.jsxs)("div",{className:"p-5 w-3/4",children:[(0,t.jsx)("div",{className:"h-6 rounded-sm bg-gray-200 duration-75 animate-pulse mb-4"}),(0,t.jsxs)("div",{className:"animate-pulse",children:[(0,t.jsx)("div",{className:"h-1 mt-2 w-1/3 rounded-sm bg-gray-300"}),(0,t.jsx)("div",{className:"h-1 mt-2 w-2/3 rounded-sm bg-gray-300"}),(0,t.jsx)("div",{className:"h-1 mt-2 rounded-sm bg-gray-300"}),(0,t.jsx)("div",{className:"h-1 mt-2 rounded-sm bg-gray-300"}),(0,t.jsx)("div",{className:"h-1 mt-2 rounded-sm bg-gray-300"}),(0,t.jsx)("div",{className:"h-2 rounded-sm bg-gray-300"})]})]})]})]})]})});s.Z=d},2069:function(e,s,a){"use strict";a.r(s);var t=a(5893),d=a(1163),l=a.n(d),r=a(7294),i=a(1955),c=a(2049),m=a(6154),n=a(8260);let x=()=>{let[e,s]=(0,r.useState)(!0),[a,x]=(0,r.useState)(!0);!async function(){let e=i.Z.get("token");if(e)try{let s=await fetch("/api/middleware/auth?token=".concat(e),{method:"POST"});s.ok||l().push({pathname:"/login",query:{message:"Token Invalid"}})}catch(e){l().push({pathname:"/login",query:{message:"Token Expired"}})}else l().push({pathname:"/login",query:{message:"Token Invalid"}})}();let o=(0,d.useRouter)(),[h,u]=(0,r.useState)(""),[g,p]=(0,r.useState)(""),[y,j]=(0,r.useState)(""),[N,w]=(0,r.useState)(""),[v,f]=(0,r.useState)(!1),[b,k]=(0,r.useState)([]),[_,S]=(0,r.useState)([]),E=o.query.userId,T=i.Z.get("user_id");(0,r.useEffect)(()=>{let e=async()=>{try{let e=await fetch("/api/users?id=".concat(E),{method:"POST"});if(!e.ok)throw Error("Error fetching user data");let s=await e.json();u(s._id),p(s.name),j(s.email)}catch(e){console.log(e.message)}};E&&e()},[E]);let Z=async()=>{s(!0);try{let e=await m.Z.get("/api/order?id=".concat(T));k(e.data),S(e.data),x(!1),s(!1)}catch(e){console.log(e),w("Internet Connection not Stable. "),f(!0),s(!1),x(!1)}setTimeout(()=>{f(!1)},3e3)};(0,r.useEffect)(()=>{Z()},[]);let z=()=>{i.Z.remove("token"),i.Z.remove("user_id"),i.Z.remove("isAdmin"),l().push("/")};return(0,r.useEffect)(()=>{let e=setTimeout(()=>{s(!1)},3e3);return()=>clearTimeout(e)},[]),(0,t.jsxs)("div",{className:"my-8",children:[e?(0,t.jsx)(c.Z,{}):null,v&&(0,t.jsx)("div",{className:"fixed top-0 left-0 lg:left-auto right-0 z-50 p-4",children:(0,t.jsxs)("div",{className:"mx-auto max-w-sm bg-white rounded-lg shadow-lg flex items-center",children:[(0,t.jsx)("div",{className:"flex-shrink-0",children:(0,t.jsx)("svg",{className:"h-8 w-8 text-gray-400",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",children:(0,t.jsx)("path",{fillRule:"evenodd",d:"M16 10a6 6 0 11-12 0 6 6 0 0112 0zm-6 5a1 1 0 100-2 1 1 0 000 2zm0-10a1 1 0 100-2 1 1 0 000 2zM5.78 14.55a4.002 4.002 0 01-1.513-1.513A5.984 5.984 0 013 10a6 6 0 1111.268 3H13a1 1 0 00-1 1v1a1 1 0 102 0v-1a3 3 0 00-3-3h-.268A5.992 5.992 0 015.78 14.55zM10 12a1 1 0 100-2 1 1 0 000 2z",clipRule:"evenodd"})})}),(0,t.jsx)("div",{className:"ml-4",children:(0,t.jsx)("div",{className:"mt-2 mx-2 text-sm text-gray-500",children:N})})]})}),(0,t.jsxs)("div",{className:"flex w-full h-auto text-gray-700 mt-8",children:[(0,t.jsx)("h1",{className:"mt-auto font-bold float-left m-4 text-3xl",children:"My Account"}),(0,t.jsx)("a",{onClick:z,className:"ml-auto m-4 mt-auto cursor-pointer",children:(0,t.jsx)("p",{className:" font-bold underline",children:"log out"})})]}),(0,t.jsxs)("div",{className:"lg:flex justify-evenly w-screen",children:[(0,t.jsxs)("div",{className:"md:w-[30%] ml-8",children:[(0,t.jsx)("h1",{className:"text-2xl tracking-widest my-1",children:"Account details"}),(0,t.jsx)("p",{className:"text-gray-600 tracking-wider my-1",children:h}),(0,t.jsx)("p",{className:"text-gray-600 tracking-wider my-1",children:g}),(0,t.jsx)("p",{className:"text-gray-600 tracking-wider my-1",children:y}),(0,t.jsx)("p",{className:"text-gray-600 tracking-wider my-1",children:_.address}),(0,t.jsx)("p",{className:"text-gray-600 tracking-wider my-1",children:_.apartment})]}),e?(0,t.jsx)(c.Z,{}):(0,t.jsxs)("div",{className:"mt-8 md:mt-0",children:[(0,t.jsx)("h1",{className:"text-2xl tracking-widest my-1",children:"Order History"}),b?(0,t.jsx)("div",{className:"flex flex-col mt-4",children:(0,t.jsx)("div",{className:"overflow-x-auto sm:-mx-6 lg:-mx-8",children:(0,t.jsx)("div",{className:"py-2 align-middle inline-block min-w-full sm:px-6 lg:px-8",children:(0,t.jsx)("div",{className:"shadow overflow-hidden border-b border-gray-200 sm:rounded-lg",children:(0,t.jsxs)("table",{className:"min-w-full divide-y divide-gray-200",children:[(0,t.jsx)("thead",{className:"bg-gray-50",children:(0,t.jsxs)("tr",{children:[(0,t.jsx)("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Id"}),(0,t.jsx)("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Date"}),(0,t.jsx)("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Total Amount"}),(0,t.jsx)("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Status"})]})}),(0,t.jsx)("tbody",{className:"bg-white divide-y divide-gray-200",children:b.reverse().slice(0,10).map(e=>(0,t.jsxs)("tr",{children:[(0,t.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:e._id}),(0,t.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,t.jsx)("div",{className:"text-sm text-gray-500",children:(0,n.Z)(new Date(e.dateOrdered),"MM/dd/yyyy")})}),(0,t.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,t.jsx)("div",{className:"text-sm text-gray-900",children:e.totalPrice.toLocaleString("en-IN")})}),(0,t.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,t.jsx)("div",{className:"text-sm text-gray-900",children:e.status})})]},e._id))})]})})})})}):(0,t.jsx)("p",{className:"text-gray-600 tracking-wider my-1",children:"You haven't placed any orders yet."})]})]})]})};s.default=x}},function(e){e.O(0,[260,774,888,179],function(){return e(e.s=9431)}),_N_E=e.O()}]);